plugins {
    id "io.micronaut.build.internal.data-module"
    id "io.micronaut.build.internal.data-kotlin"
    id 'org.checkerframework' version '0.6.20'
}

apply plugin: 'org.checkerframework'

repositories {
    // Use Maven Central for resolving dependencies.
    mavenCentral()
    mavenLocal()
}

checkerFramework {
    checkers = [
            'org.checkerframework.checker.tainting.TaintingChecker',
    ]
    extraJavacArgs = [
            '-Awarns',
            // '-Astubs=' + projectDir + '/stubs'
    ]
}

dependencies {
    annotationProcessor mn.micronaut.inject.java
    annotationProcessor mn.micronaut.graal
    annotationProcessor mn.micronaut.serde.processor

    api projects.dataTx
    api mn.micronaut.inject
    api mn.micronaut.validation
    api mn.micronaut.aop

    implementation libs.reactor

    compileOnly libs.jakarta.persistence.api
    compileOnly libs.rxjava2
    compileOnly mn.jackson.annotations
    compileOnly mn.jackson.databind
    compileOnly mn.micronaut.serde.api

    testCompileOnly mn.micronaut.serde.processor
    testImplementation mn.micronaut.inject.java.test
    testImplementation mn.micronaut.serde.jackson
    testImplementation mn.micronaut.jackson.databind

    compileOnly 'org.checkerframework:checker-qual:3.28.1-SNAPSHOT'
    testCompileOnly 'org.checkerframework:checker-qual:3.28.1-SNAPSHOT'
    checkerFramework 'org.checkerframework:checker:3.28.1-SNAPSHOT'
}
